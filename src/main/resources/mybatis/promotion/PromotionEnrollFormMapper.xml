<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<!-- 报名表单基本信息(PROMOTION_ENROLL_FORM) -->
<mapper namespace="com.jubaozan.service.promotion.repository.mybatis.mapper.PromotionEnrollFormMapper">
    <!-- This code was generated by TableGo tools, mark 1 begin. -->
    <!-- 字段映射 -->
    <resultMap id="promotionEnrollFormMap" type="com.jubaozan.service.promotion.vo.form.EnrollFormVO">
        <id column="ID" property="id" jdbcType="BIGINT" />
        <result column="TITLE" property="title" jdbcType="VARCHAR" />
        <result column="DESCRIPTION" property="description" jdbcType="VARCHAR" />
        <result column="START_TIME" property="startTime" jdbcType="TIMESTAMP" />
        <result column="END_TIME" property="endTime" jdbcType="TIMESTAMP" />
        <result column="JUMP_URL" property="jumpUrl" jdbcType="VARCHAR" />
        <result column="STATUS" property="status" jdbcType="INTEGER" />
        <result column="IMAGE_TOP" property="imageTop" jdbcType="VARCHAR" />
        <result column="IMAGE_BOTTOM" property="imageBottom" jdbcType="VARCHAR" />
        <result column="SJID" property="sjid" jdbcType="INTEGER" />
        <result column="CREATE_TIME" property="createTime" jdbcType="TIMESTAMP" />
        <result column="UPDATE_TIME" property="updateTime" jdbcType="TIMESTAMP" />
    </resultMap>
    <!-- This code was generated by TableGo tools, mark 1 end. -->
    
    <!-- This code was generated by TableGo tools, mark 2 begin. -->
    <!-- 表所有字段 -->
    <sql id="allColumns">
        ID, TITLE, DESCRIPTION, START_TIME, END_TIME, JUMP_URL, STATUS, IMAGE_TOP, 
        IMAGE_BOTTOM, SJID, CREATE_TIME, UPDATE_TIME
    </sql>
    <!-- This code was generated by TableGo tools, mark 2 end. -->
    
    <!-- 查询所有数据 -->
    <select id="findPromotionEnrollFormAll" resultMap="promotionEnrollFormMap">
        SELECT
        <include refid="allColumns" />
        FROM PROMOTION_ENROLL_FORM
    </select>
    
    <!-- 根据条件参数查询数据列表 -->
    <select id="findPromotionEnrollFormByCondition" resultType="com.jubaozan.service.promotion.vo.form.EnrollFormListVO"
            parameterType="map">
        SELECT
        id,title as formName,create_time createTime,start_time startTime,end_time endTime
        FROM promotion_enroll_form WHERE 1 = 1
        <if test="title != null and title != ''">
            AND TITLE LIKE CONCAT('%', #{title}, '%')
        </if>
        <if test="startTime != null">
            AND START_TIME = #{startTime}
        </if>
        and sjid=#{sjid}
        order by update_time desc
        limit #{start},#{offset}
    </select>
    <!-- 根据主键查询数据总条数 -->
    <select id="findCountByCondition" resultType="INT">
        SELECT
            count(*)
        FROM promotion_enroll_form WHERE 1 = 1
        <if test="title != null and title != ''">
            AND TITLE LIKE CONCAT('%', #{title}, '%')
        </if>
            and sjid=#{sjid}
    </select>
    <!-- 根据主键查询数据 -->
    <select id="findPromotionEnrollFormByIds" resultMap="promotionEnrollFormMap" parameterType="list">
        SELECT
        <include refid="allColumns" />
        FROM promotion_enroll_form WHERE ID IN
        <foreach collection="list" index="index" item="id" open="(" separator="," close=")">
            #{id}
        </foreach>
    </select>
    
    <!-- 插入数据 -->
    <insert id="insertPromotionEnrollForm" useGeneratedKeys="true" keyProperty="id"
            parameterType="com.jubaozan.service.promotion.model.PromotionEnrollFormEntity">
        INSERT INTO promotion_enroll_form (
            TITLE, DESCRIPTION, START_TIME, END_TIME, JUMP_URL, STATUS, IMAGE_TOP,
            IMAGE_BOTTOM, SJID
        ) VALUES (
            #{title},
            #{description},
            #{startTime},
            #{endTime},
            #{jumpUrl},
            #{status},
            #{imageTop},
            #{imageBottom},
            #{sjid}
        )
    </insert>
    
    <!-- 修改数据 -->
    <update id="updatePromotionEnrollForm" parameterType="map">
        UPDATE promotion_enroll_form
        <set>
            <if test="title != null">
                TITLE = #{title},
            </if>
            <if test="description != null">
                DESCRIPTION = #{description},
            </if>
            <if test="startTime != null">
                START_TIME = #{startTime},
            </if>
            <if test="endTime != null">
                END_TIME = #{endTime},
            </if>
            <if test="jumpUrl != null">
                JUMP_URL = #{jumpUrl},
            </if>
            <if test="imageTop != null">
                IMAGE_TOP = #{imageTop},
            </if>
            <if test="imageBottom != null">
                IMAGE_BOTTOM = #{imageBottom}
            </if>

        </set>
        WHERE ID = #{id}
    </update>
    
    <!-- 根据主键删除数据 -->
    <delete id="deletePromotionEnrollFormById" parameterType="long">
        DELETE FROM PROMOTION_ENROLL_FORM WHERE ID = #{id}
    </delete>
    
</mapper>